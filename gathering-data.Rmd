---
title: "gathering-data"
author: "Alexander Park"
date: "10/15/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(janitor)
library(rstanarm)
require("knitr")
opts_knit$set(root.dir = "~/Desktop/GOV_50/home-field-advantage/shiny-app")
```

# NFL

```{r nfl}

# Create object nfl_scores_1966 that has all scores from NFL games from 1966-67
# to 2019-2020. I clean this up by assigning data for defunct teams to teams
# that succeeded them.

nfl_scores_1966 <- read_csv("data/nflscores1966/spreadspoke_scores.csv",
                            col_types = cols(schedule_date = col_character(),
                                             schedule_season = col_double(),
                                             schedule_week = col_character(),
                                             schedule_playoff = col_logical(),
                                             team_home = col_character(),
                                             score_home = col_double(),
                                             score_away = col_double(),
                                             team_away = col_character(),
                                             team_favorite_id = col_character(),
                                             spread_favorite = col_double(),
                                             over_under_line = col_double(),
                                             stadium = col_character(),
                                             stadium_neutral = col_logical(),
                                             weather_temperature = col_double(),
                                             weather_wind_mph = col_double(),
                                             weather_humidity = col_character(),
                                             weather_detail = 
                                               col_character())) %>%
  mutate(team_home = case_when(team_home == "Baltimore Colts" ~ 
                                 "Indianapolis Colts",
                               team_home == "Boston Patriots" ~
                                 "New England Patriots",
                               team_home == "Houston Oilers" ~
                                 "Tennessee Titans",
                               team_home == "Phoenix Cardinals" ~
                                 "Arizona Cardinals",
                               team_home == "Los Angeles Raiders" ~ 
                                 "Las Vegas Raiders",
                               team_home == "Oakland Raiders" ~
                                 "Las Vegas Raiders",
                               team_home == "Tennessee Oilers" ~
                                 "Tennessee Titans",
                               team_home == "Washington Redskins" ~
                                 "Washington Football Team",
                               team_home == "San Diego Chargers" ~
                                 "Los Angeles Chargers",
                               team_home == "St. Louis Cardinals" ~
                                 "Arizona Cardinals",
                               team_home == "St. Louis Rams" ~
                                 "Los Angeles Rams",
                               TRUE ~ team_home)) %>%
  mutate(team_away = case_when(team_away == "Baltimore Colts" ~ 
                                 "Indianapolis Colts",
                               team_away == "Boston Patriots" ~
                                 "New England Patriots",
                               team_away == "Houston Oilers" ~
                                 "Tennessee Titans",
                               team_away == "Phoenix Cardinals" ~
                                 "Arizona Cardinals",
                               team_away == "Los Angeles Raiders" ~ 
                                 "Las Vegas Raiders",
                               team_away == "Oakland Raiders" ~
                                 "Las Vegas Raiders",
                               team_away == "Tennessee Oilers" ~
                                 "Tennessee Titans",
                               team_away == "Washington Redskins" ~
                                 "Washington Football Team",
                               team_away == "San Diego Chargers" ~
                                 "Los Angeles Chargers",
                               team_away == "St. Louis Cardinals" ~
                                 "Arizona Cardinals",
                               team_away == "St. Louis Rams" ~
                                 "Los Angeles Rams",
                               TRUE ~ team_away))

# Create object avg_nfl_home_score that is the average score that home teams
# have had over the years. Save to RDS.

avg_nfl_home_score <- nfl_scores_1966 %>%
  group_by(team_home) %>%
  summarize(avg_home = mean(score_home), .groups = "drop")

saveRDS(avg_nfl_home_score, file = "nfl_avg_home_scores.RDS")

# Create object avg_nfl_away_score that is the average score that away teams
# have had over the years. Save to RDS.

avg_nfl_away_score <- nfl_scores_1966 %>%
  group_by(team_away) %>%
  summarize(avg_away = mean(score_away), .groups = "drop")

saveRDS(avg_nfl_away_score, file = "nfl_avg_away_scores.RDS")

```

# NBA

```{r nba}

# Create object nba_names_2004 to organize NBA team names.

nba_names_2004 <- read_csv("data/nba2004/teams.csv") %>%
  clean_names()

nba_names_2004 <- nba_names_2004 %>%
  select(city, nickname, team_id) %>%
  unite(name, c("city", "nickname"), sep = " ")

# Create object nba_scores_2004 that has all scores from NBA games from 2004
# to March 2020.

nba_scores_2004 <- read_csv("data/nba2004/games.csv") %>%
  clean_names() %>%
  rename(team_id = home_team_id) %>%
  select(team_id, visitor_team_id, season, pts_home, pts_away)

nba_scores_2004 <- left_join(nba_scores_2004, nba_names_2004, by = "team_id") %>%
  rename(home_team = name)

nba_names_2004_away <- nba_names_2004 %>%
  rename(visitor_team_id = team_id)
  
nba_scores_2004 <- left_join(nba_scores_2004, 
                             nba_names_2004_away, 
                             by = "visitor_team_id") %>%
  rename(away_team = name) %>%
  select(home_team, away_team, season, pts_home, pts_away)

# Create object avg_nba_home_score that is the average score that home teams
# have had over the years. Save to RDS.

avg_nba_home_score <- nba_scores_2004 %>%
  select(home_team, pts_home) %>%
  group_by(home_team) %>%
  summarize(avg_home = mean(pts_home, na.rm = TRUE), .groups = "drop")

saveRDS(avg_nba_home_score, file = "nba_avg_home_scores.RDS")

# Create object avg_nba_home_score that is the average score that away teams
# have had over the years. Save to RDS.

avg_nba_away_score <- nba_scores_2004 %>%
  select(away_team, pts_away) %>%
  group_by(away_team) %>%
  summarize(avg_away = mean(pts_away, na.rm = TRUE), .groups = "drop")

saveRDS(avg_nba_away_score, file = "nba_avg_away_scores.RDS")

```

# MLB

```{r mlb}

# Create object mlb_scores_1947 that has all scores from MLB games from 1947
# (when the MLB became racially integrated) to October 2019 (pre-Covid). I clean
# the data to display team names instead of team IDs.
  
mlb_scores_1947 <- read_csv("data/mlbscores/mlb_elo.csv", 
                            col_types = cols(.default = col_double(),
                                             date = col_date(format = ""),
                                             playoff = col_character(),
                                             team1 = col_character(),
                                             team2 = col_character(),
                                             pitcher1 = col_character(),
                                             pitcher2 = col_character())) %>%
  clean_names() %>%
  rename(home_team_id = team1,
         away_team_id = team2,
         home_score = score1,
         away_score = score2) %>%
  filter(season >= 1947) %>%
  filter(season != 2020) %>%
  mutate(home_team = case_when(home_team_id == "HOU" ~ "Houston Astros",
                               home_team_id == "WSN" ~ "Washington Nationals",
                               home_team_id == "NYY" ~ "New York Yankees",
                               home_team_id == "STL" ~ "St. Louis Cardinals",
                               home_team_id == "LAD" ~ "Los Angeles Dodgers",
                               home_team_id == "ATL" ~ "Atlanta Braves",
                               home_team_id == "TBD" ~ "Tampa Bay Rays",
                               home_team_id == "MIN" ~ "Minnesota Twins",
                               home_team_id == "OAK" ~ "Oakland Athletics",
                               home_team_id == "KCR" ~ "Kansas City Royals",
                               home_team_id == "SEA" ~ "Seattle Mariners",
                               home_team_id == "NYM" ~ "New York Mets",
                               home_team_id == "COL" ~ "Colorado Rockies",
                               home_team_id == "CHW" ~ "Chicago White Sox",
                               home_team_id == "ARI" ~ "Arizona Diamondbacks",
                               home_team_id == "TOR" ~ "Toronot Blue Jays",
                               home_team_id == "ANA" ~ "Anahiem Angels",
                               home_team_id == "TEX" ~ "Texas Rangers",
                               home_team_id == "SFG" ~ "San Francisco Giants",
                               home_team_id == "PIT" ~ "Pittsburgh Pirates",
                               home_team_id == "PHI" ~ "Philadelphia Phillies",
                               home_team_id == "BOS" ~ "Boston Red Sox",
                               home_team_id == "SDP" ~ "San Diego Padres",
                               home_team_id == "DET" ~ "Detroit Tigers",
                               home_team_id == "CIN" ~ "Cincinnati Reds",
                               home_team_id == "CLE" ~ "Cleveland Indians",
                               home_team_id == "CHC" ~ "Chicago Cubs",
                               home_team_id == "MIL" ~ "Milwaukee Brewers",
                               home_team_id == "FLA" ~ "Miami Marlins",
                               home_team_id == "BAL" ~ "Baltimore Orioles",
                               TRUE ~ home_team_id)) %>%
  mutate(away_team = case_when(away_team_id == "HOU" ~ "Houston Astros",
                               away_team_id == "WSN" ~ "Washington Nationals",
                               away_team_id == "NYY" ~ "New York Yankees",
                               away_team_id == "STL" ~ "St. Louis Cardinals",
                               away_team_id == "LAD" ~ "Los Angeles Dodgers",
                               away_team_id == "ATL" ~ "Atlanta Braves",
                               away_team_id == "TBD" ~ "Tampa Bay Rays",
                               away_team_id == "MIN" ~ "Minnesota Twins",
                               away_team_id == "OAK" ~ "Oakland Athletics",
                               away_team_id == "KCR" ~ "Kansas City Royals",
                               away_team_id == "SEA" ~ "Seattle Mariners",
                               away_team_id == "NYM" ~ "New York Mets",
                               away_team_id == "COL" ~ "Colorado Rockies",
                               away_team_id == "CHW" ~ "Chicago White Sox",
                               away_team_id == "ARI" ~ "Arizona Diamondbacks",
                               away_team_id == "TOR" ~ "Toronot Blue Jays",
                               away_team_id == "ANA" ~ "Anahiem Angels",
                               away_team_id == "TEX" ~ "Texas Rangers",
                               away_team_id == "SFG" ~ "San Francisco Giants",
                               away_team_id == "PIT" ~ "Pittsburgh Pirates",
                               away_team_id == "PHI" ~ "Philadelphia Phillies",
                               away_team_id == "BOS" ~ "Boston Red Sox",
                               away_team_id == "SDP" ~ "San Diego Padres",
                               away_team_id == "DET" ~ "Detroit Tigers",
                               away_team_id == "CIN" ~ "Cincinnati Reds",
                               away_team_id == "CLE" ~ "Cleveland Indians",
                               away_team_id == "CHC" ~ "Chicago Cubs",
                               away_team_id == "MIL" ~ "Milwaukee Brewers",
                               away_team_id == "FLA" ~ "Miami Marlins",
                               away_team_id == "BAL" ~ "Baltimore Orioles",
                               TRUE ~ away_team_id))

# Create object avg_mlb_home_score that is the average score that home teams
# have had over the years. Save to RDS.

avg_mlb_home_score <- mlb_scores_1947 %>%
  select(home_team, home_score) %>%
  group_by(home_team) %>%
  summarize(avg_home = mean(home_score, na.rm = TRUE), .groups = "drop")

saveRDS(avg_mlb_home_score, file = "mlb_avg_home_scores.RDS")

# Create object avg_mlb_away_score that is the average score that away teams
# have had over the years. Save to RDS.

avg_mlb_away_score <- mlb_scores_1947 %>%
  select(away_team, away_score) %>%
  group_by(away_team) %>%
  summarize(avg_away = mean(away_score, na.rm = TRUE), .groups = "drop")

saveRDS(avg_mlb_away_score, file = "mlb_avg_away_scores.RDS")

```

# Models

$$ score = \beta_0 + \beta_1 home_i + \epsilon_i $$

```{r nfl model}

# Here, I make the NFL model using stan_glm() in order to predict the difference
# in scores between home and away games for the league, on the whole.

nfl_model_data_home <- nfl_scores_1966 %>%
  select(team_home, score_home) %>%
  mutate(home = 1) %>%
  rename(team = team_home,
         score = score_home)

nfl_model_data_away <- nfl_scores_1966 %>%
  select(team_away, score_away) %>%
  mutate(home = 0) %>%
  rename(team = team_away,
         score = score_away)

nfl_model_data <- full_join(nfl_model_data_home, nfl_model_data_away)
  

nfl_model <- stan_glm(score ~ home,
                      data = nfl_model_data,
                      refresh = 0)

print(nfl_model, digits = 4)

saveRDS(nfl_model, file = "nfl_model.RDS")

tbl_regression(nfl_model, intercept = TRUE) %>%
        as_gt() %>%
        fmt_number(columns = vars(estimate, std.error),
                   decimals = 4) %>%
        tab_header(title = "Regression of NFL Scores",
                   subtitle = "The Effect of Home Field on Score") %>%
        tab_source_note("Source: https://www.kaggle.com/tobycrabtree/nfl-scores-and-betting-data")

```

$$ score = \beta_0 + \beta_1 home_i + \beta_2 attendance_i + \beta_3 home_i * attendance_i + \epsilon_i $$

```{r mlb model}

# Here, I gather MLB attendance data.

mlb_attendance_raw <- read_csv("data/mlbscores/Teams.csv", 
                               col_types = cols(teamID = col_character())) %>%
  filter(yearID >= 1947) %>%
  filter(yearID != 2020) %>%
  select(yearID, Ghome, attendance, teamID, name) %>%
  mutate(avg_attendance = attendance / Ghome)

# Here, I further clean the mlb_scores dataset

mlb_scores_raw <- mlb_scores_1947 %>%
  select(date, 
         season, 
         home_team_id, 
         away_team_id,
         home_team,
         away_team,
         home_score, 
         away_score)

# Here, I edit mlb_attendance_raw to reflect the modern names of teams. I also
# create marker columns in mlb_attendance and mlb_scores for easy combining
# later on.

mlb_attendance <- mlb_attendance_raw %>%
  mutate(team = case_when(teamID == "BRO" ~ "LAD",
                          teamID == "BSN" ~ "ATL",
                          teamID == "CHA" ~ "CHW",
                          teamID == "NY1" ~ "SFG",
                          teamID == "NYA" ~ "NYY",
                          teamID == "PHA" ~ "OAK",
                          teamID == "SLA" ~ "BAL",
                          teamID == "WS1" ~ "MIN",
                          teamID == "ML1" ~ "ATL",
                          teamID == "KS1" ~ "OAK",
                          teamID == "LAN" ~ "LAD",
                          teamID == "WS2" ~ "TEX",
                          teamID == "NYN" ~ "NYM",
                          teamID == "CAL" ~ "ANA",
                          teamID == "KCA" ~ "KCR",
                          teamID == "MON" ~ "WSN",
                          teamID == "SDN" ~ "SDP",
                          teamID == "SE1" ~ "MIL",
                          teamID == "ML4" ~ "MIL",
                          teamID == "FLO" ~ "FLA",
                          teamID == "TBA" ~ "TBD",
                          teamID == "LAA" ~ "ANA",
                          teamID == "WAS" ~ "WSN",
                          teamID == "MIA" ~ "FLA",
                          TRUE ~ teamID)) %>%
  select(yearID, team, attendance, avg_attendance) %>%
  mutate(marker = str_c(yearID, team, sep = " "))

mlb_scores <- mlb_scores_raw %>%
  mutate(marker = str_c(season, home_team_id, sep = " "))

# Here, I combine both mlb_scores and mlb_attendance.

mlb_combined <- left_join(mlb_scores, mlb_attendance, by = "marker") %>%
  select(season,
         home_team,
         away_team,
         home_score,
         away_score,
         avg_attendance)

# Make RDS

saveRDS(mlb_combined, file = "mlb_combined.RDS")

# Here, I make the MLB model using stan_glm() in order to predict the difference
# in scores between home and away games for the league, on the whole.

# I mutate the "avg_attendance" column (divide it by 1000) to make the
# "attendance" column so that my analysis can be the change in score depending
# on every 1000+ fans are in attendance.

mlb_model_data_home <- mlb_combined %>%
  select(home_team, home_score, away_score, avg_attendance) %>%
  mutate(score_diff = home_score - away_score) %>%
  mutate(home = 1) %>%
  mutate(attendance = avg_attendance / 1000) %>%
  rename(team = home_team,
         score = home_score)

mlb_model_data_away <- mlb_combined %>%
  select(away_team, away_score, home_score, avg_attendance) %>%
  mutate(score_diff = away_score - home_score) %>%
  mutate(home = 0) %>%
  mutate(attendance = avg_attendance / 1000) %>%
  rename(team = away_team,
         score = away_score)

mlb_model_data <- full_join(mlb_model_data_home, mlb_model_data_away)

mlb_model_complex <- stan_glm(score ~ home + attendance + home * attendance,
                      data = mlb_model_data,
                      refresh = 0)

print(mlb_model_complex, digits = 4)

saveRDS(mlb_model_complex, file = "mlb_model_complex.RDS")

```

```{r nba model}

# Here, I make the NBA model using stan_glm() in order to predict the difference
# in scores between home and away games for the league, on the whole.

nba_model_data_home <- nba_scores_2004 %>%
  select(home_team, pts_home) %>%
  mutate(home = 1) %>%
  rename(team = home_team,
         score = pts_home)

nba_model_data_away <- nba_scores_2004 %>%
  select(away_team, pts_away) %>%
  mutate(home = 0) %>%
  rename(team = away_team,
         score = pts_away)

nba_model_data <- full_join(nba_model_data_home, nba_model_data_away)

nba_model <- stan_glm(score ~ home,
                      data = nba_model_data,
                      refresh = 0)

print(nba_model, digits = 4)

saveRDS(nba_model, file = "nba_model.RDS")

```

```{r test}
########## NFL ##########

    # NFL Tab setup.

    tabPanel("NFL",
         
            # NFL Model Table
         
            h1("Linear Regressions for the NFL with Score as Output and Home as 
            Predictor"),
         
            h2("The Equation"),
            uiOutput("reg_eq"),
         
            h2("NFL Model"),
            tableOutput("NFLModelTable")
         
            ),

########## NBA ##########

    # NBA Tab setup.

    tabPanel("NBA",
         
            # NBA Model Table
         
            h1("Linear Regression for the NBA with Score as Output and Home as 
            Predictor"),
            
            h2("The Equation"),
            uiOutput("reg_eq"),
         
         
            h2("NBA Model"),
            tableOutput("NBAModelTable")
         
            ),

########## MLB: A DEEPER DIVE ##########

# MLB Tab setup.

    tabPanel("MLB: A Deeper Dive",
             
             # MLB Complex Model Table
             
             h1("Linear Regression for the MLB with Score as Output and Home, 
             Attendance, and their Interaction as Predictors"),
             
             h2("The Equation"),
             uiOutput("mlb_reg_eq"),
            
             
             h2("MLB Complex Model"),
             tableOutput("MLBComplexModelTable"),
             
             ),

########## ABOUT ##########

# About Tab setup. 

    tabPanel("About",
         
         # About Me Section. Text extends beyond the line when it is a long
         # link.
         
         h1("About Me"),
         p("My name is Alexander Park and I am pursuing an A.B. in Government 
         with a specialization in Public Policy and a secondary in Economics at 
         Harvard University. I will graduate in the spring of 2023. I am a 
         lifelong Boston sports fan, especially of the Patriots, Red Sox, and 
         Celtics. Besides sports, I have passions for American and Korean 
         politics, U.S. foreign policy, and the processes of and motivations 
         behind democratization. You can reach me at", 
         a("apark@college.harvard.edu", href = "mailto:apark@college.harvard.edu"),
         "."),
         
         # Project Motivations Section
         
         h1("Project Motivations"),
         p("This is my final project for GOV 50: Data at Harvard University. As 
         a Boston sports fan, I am used to having home field advantage in the 
         playoffs. Therefore, I wanted to use data analysis to determine 
         quantitatively how much home field advantage actually matters in my 
         three favorite leagues: the NFL, NBA, and MLB. In finding all of this 
         out, I hope to contribute to the sports-watching experience for fans 
         around the country and the world â€“ especially for my fellow 
         Bostonians."),
         
         # Data Section. Text extends beyond the line when it is a long link.
         
         h1("The Data"),
         
         h3("NFL Data"),
         p("I obtained NFL scores from the 1966 season onwards from", a("Kaggle 
         user spreadspoke.", href = "https://www.kaggle.com/tobycrabtree/nfl-scores-and-betting-data")),
         
         h3("NBA Data"),
         p("I obtained NBA scores from the 2004 season onwards from", a("Kaggle
         user Nathan Lauga.", href = "https://www.kaggle.com/nathanlauga/nba-games")),
         
         h3("MLB Data"),
         p("I obtained MLB scores from the 1947 season onwards from", 
           a("FiveThirtyEight's mlb-elo data set.", href = "https://data.fivethirtyeight.com/")),
         
         p("I obtained MLB attendance data from the 1947 season onwards from",
           a("Sean Lahman's Baseball Database.", href = "http://www.seanlahman.com/baseball-archive/statistics/")),
         
         h3("GitHub"),
         p("Here is the link to this project's", a("GitHub repository.", 
                                       href = "https://github.com/alexanderkpark/home-field-advantage")),
         
         # Acknowledgements Section.
         
         h1("Acknowledgements"),
         p("I am grateful for the guidance that", strong("Wyatt Hurt"), "and",
         strong("Tyler Simko"), "have given me throughout this semester. 
         Without their instruction and advice, I would not have been able to 
         develop this project and start my journey in the field of data 
         science.")
       
         )

########## NFL ##########
    
    # reg_eq or Regression Equation made in Latex. Equation goes over the line
    # so as not to disturb display in app.
    
    output$reg_eq <- renderUI({
      
      withMathJax(sprintf("$$ score = \\beta_0 + \\beta_1 home_i + \\epsilon_i $$"))
    
    })
    
    # NFLModelTable made.
    
    output$NFLModelTable <- render_gt({
      
      # Make NFL Model Table. Text extends beyond the line when it is a long
      # link.
      
      tbl_regression(nfl_model, intercept = TRUE) %>%
        as_gt() %>%
        fmt_number(columns = vars(estimate, std.error),
                   decimals = 4) %>%
        tab_header(title = "Regression of NFL Scores",
                   subtitle = "The Effect of Home Field on Score") %>%
        tab_source_note("Source: https://www.kaggle.com/tobycrabtree/nfl-scores-and-betting-data")
      
    })
    

########## NBA ##########
    
    # reg_eq or Regression Equation made in Latex. Equation goes over the line
    # so as not to disturb display in app.
    
    output$reg_eq <- renderUI({
      
      withMathJax(sprintf("$$ score = \\beta_0 + \\beta_1 home_i + \\epsilon_i $$"))
      
    })
      
      # NBAModelTable made.
      
      output$NBAModelTable <- render_gt({
        
        # Make NBA Model Table.
        
        tbl_regression(nba_model, intercept = TRUE) %>%
          as_gt() %>%
          fmt_number(columns = vars(estimate, std.error),
                     decimals = 4) %>%
          tab_header(title = "Regression of NBA Scores",
                     subtitle = "The Effect of Home Court on Score") %>%
          tab_source_note("Source: https://www.kaggle.com/nathanlauga/nba-games")
        
      })

########## MLB: A DEEPER DIVE ##########
    
    # mlb_reg_eq or MLB Regression Equation made in Latex. Equation goes over
    # the line so as not to disturb display in app.
    
    output$reg_eq <- renderUI({
      
      withMathJax(sprintf("$$ score = \\beta_0 + \\beta_1 home_i + \\beta_3 home_i * attendance_i + \\epsilon_i $$"))
      
    })
      
    # MLBComplexModelTable made.
      
    output$MLBComplexModelTable <- render_gt({
        
        # Make MLB Complex Model Table. Links go over the line.
        
        tbl_regression(mlb_complex_model, intercept = TRUE) %>%
          as_gt() %>%
          fmt_number(columns = vars(estimate, std.error),
                     decimals = 4) %>%
          tab_header(title = "Regression of MLB Scores",
                     subtitle = "The Effect of Home, Attendance, and their Interaction on Score") %>%
          tab_source_note("Sources: https://data.fivethirtyeight.com/ &
                          http://www.seanlahman.com/baseball-archive/statistics/")
        
      })
```


Make dashboard of interactive interface with selections for different teams and different years.

Tab 1: Data Explanation
- This tab will also house interactive portion where you will be able to see average home scores of teams across the years.
Tab 2: Interesting Cases (maybe static plots, with paragraphs explaining what's interesting)
Tab 3: Models
- This tab will also house interactive portion where you will be able to determine the score margin for different teams.
Tab 4: MLB Model
- Skeptical about the home field positive value for other leagues unless you actually control for attendance.
- The negative value is so small, that basically what the results of the model is that home field does not seem to matter --> not saying that there is no effect, but that it is not a good predictor. There could be another covariate that we don't know about/don't account for.
Tab 4: About

Tab for each league
- Exploratory Data Visualization

Model: 
1. Not a causal model (no manipulation), only predictive model. Two conditions: home and away.
2. y axis is point difference of game. Outcome is point margin. stan_glm() usable.
- Cool graphic opportunities for this as well
- pivot_longer(): unit of analysis --> two rows: one row for the home team, and another from the away team. Almost exactly analagous to Week 9 lectures (control vs. treatment is analagous to home and away)
